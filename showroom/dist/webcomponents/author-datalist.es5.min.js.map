{"version":3,"file":"author-datalist.es5.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorDatalistElement extends AuthorMenuElement {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineAttributes({\n      'case-sensitive': false\n    })\n\n    this.UTIL.definePrivateMethods({\n      hideAllOptions: () => Array.from(this.options).forEach(option => option.setAttribute('hidden', '')),\n\n      inputFocusHandler: evt => {\n        this.inputElement.addEventListener('keydown', this.PRIVATE.inputKeydownHandler)\n      },\n\n      clearFilter: () => {\n        if (this.optionsElement.hasFilter('query')) {\n          this.optionsElement.removeFilter('query')\n          this.selectedIndex = -1\n        }\n      },\n\n      filterInput: () => {\n        this.PRIVATE.clearFilter()\n\n        let query = this.inputElement.value\n\n        if (!query || query === '') {\n          this.PRIVATE.showAllOptions()\n          return this.PRIVATE.clearFilter()\n        }\n\n        this.optionsElement.addFilter('query', () => {\n          let results = this.optionsElement.find(query, this['case-sensitive'])\n\n          if (results.length) {\n            return results\n          }\n\n          return this.options\n        })\n\n        this.PRIVATE.hideAllOptions()\n\n        if (this.optionsElement.filteredOptions.length > 0) {\n          this.optionsElement.filteredOptions.forEach(option => option.hidden = false)\n          this.open = true\n        } else {\n          this.open = false\n        }\n      },\n\n      inputKeydownHandler: evt => {\n        switch (evt[this.keySource]) {\n          case 13:\n          case 'Enter':\n          case 27:\n          case 'Escape':\n          case 38:\n          case 'ArrowUp':\n          case 40:\n          case 'ArrowDown':\n            break\n\n          case 32:\n          case ' ':\n            return\n\n          case 8:\n          case 'Backspace':\n            if (this.inputElement.value.length === 1) {\n              this.open = false\n            }\n\n            break\n        }\n\n        this.PRIVATE.keydownHandler(evt)\n      },\n\n      showAllOptions: () => Array.from(this.options).forEach(option => option.removeAttribute('hidden'))\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.UTIL.registerListeners(this.inputElement, {\n          focus: this.PRIVATE.inputFocusHandler,\n\n          blur: evt => {\n            this.inputElement.removeEventListener('keydown', this.PRIVATE.inputKeydownHandler)\n          },\n\n          click: evt => this.open = true,\n\n          input: evt => {\n            this.PRIVATE.filterInput(evt)\n\n            if (evt.inputType.includes('delete')) {\n              this.optionsElement.unHoverAllOptions()\n            }\n          }\n        })\n\n        this.UTIL.registerListeners(window, {\n          scroll: evt => this.open = false\n        })\n      },\n\n      'options.selected': evt => {\n        let option = evt.detail.options[0]\n        this.inputElement.value = option.value\n        this.PRIVATE.filterInput()\n        this.emit('option.selected', option.displayElement)\n        this.open = false\n      },\n\n      'state.change': evt => {\n        if (evt.detail.name === 'open' && evt.detail.value && this.inputElement.value === '') {\n          this.optionsElement.unHoverAllOptions()\n        }\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return [...AuthorMenuElement.observedAttributes, 'case-sensitive']\n  }\n\n  get value () {\n    return this.inputElement.value\n  }\n\n  add (option, index) {\n    this.optionsElement.addOption(option, index)\n  }\n\n  clear () {\n    this.inputElement.value = ''\n    this.selectedIndex = -1\n    this.PRIVATE.showAllOptions()\n  }\n\n  focus () {\n    this.inputElement.focus()\n  }\n\n  inject (input, select, guid) {\n    // Prevent re-injections\n    if (this.PRIVATE.injected) {\n      return\n    }\n\n    input.slot = 'input'\n    input.id = guid\n\n    this.UTIL.defineProperty('inputElement', {\n      readonly: true,\n      default: input\n    })\n\n    this.appendChild(this.inputElement)\n    super.inject(select)\n  }\n}\n\ncustomElements.define('author-datalist', AuthorDatalistElement)\n\nexport default AuthorDatalistElement\n"],"names":["AuthorDatalistElement","UTIL","defineAttributes","definePrivateMethods","hideAllOptions","Array","from","_this","options","forEach","option","setAttribute","inputFocusHandler","evt","inputElement","addEventListener","PRIVATE","inputKeydownHandler","clearFilter","optionsElement","hasFilter","removeFilter","selectedIndex","filterInput","query","value","showAllOptions","addFilter","results","find","length","filteredOptions","hidden","open","keySource","keydownHandler","removeAttribute","registerListeners","connected","focus","blur","removeEventListener","click","input","inputType","includes","unHoverAllOptions","window","scroll","detail","emit","displayElement","name","AuthorMenuElement","observedAttributes","index","addOption","select","guid","this","injected","slot","id","defineProperty","readonly","default","appendChild","customElements","define"],"mappings":"s8DAAMA,ykCAIGC,KAAKC,iBAAiB,mBACP,MAGfD,KAAKE,qBAAqB,CAC7BC,eAAgB,kBAAMC,MAAMC,KAAKC,EAAKC,SAASC,QAAQ,SAAAC,UAAUA,EAAOC,aAAa,SAAU,OAE/FC,kBAAmB,SAAAC,KACZC,aAAaC,iBAAiB,UAAWR,EAAKS,QAAQC,sBAG7DC,YAAa,WACPX,EAAKY,eAAeC,UAAU,aAC3BD,eAAeE,aAAa,WAC5BC,eAAiB,IAI1BC,YAAa,aACNP,QAAQE,kBAETM,EAAQjB,EAAKO,aAAaW,UAEzBD,GAAmB,KAAVA,WACPR,QAAQU,iBACNnB,EAAKS,QAAQE,gBAGjBC,eAAeQ,UAAU,QAAS,eACjCC,EAAUrB,EAAKY,eAAeU,KAAKL,EAAOjB,EAAK,0BAE/CqB,EAAQE,OACHF,EAGFrB,EAAKC,YAGTQ,QAAQZ,iBAEoC,EAA7CG,EAAKY,eAAeY,gBAAgBD,UACjCX,eAAeY,gBAAgBtB,QAAQ,SAAAC,UAAUA,EAAOsB,QAAS,MACjEC,MAAO,KAEPA,MAAO,GAIhBhB,oBAAqB,SAAAJ,UACXA,EAAIN,EAAK2B,iBACV,OACA,aACA,OACA,cACA,OACA,eACA,OACA,uBAGA,OACA,gBAGA,MACA,YACoC,IAAnC3B,EAAKO,aAAaW,MAAMK,WACrBG,MAAO,KAMbjB,QAAQmB,eAAetB,IAG9Ba,eAAgB,kBAAMrB,MAAMC,KAAKC,EAAKC,SAASC,QAAQ,SAAAC,UAAUA,EAAO0B,gBAAgB,iBAGrFnC,KAAKoC,uBAAwB,CAChCC,UAAW,aACJrC,KAAKoC,kBAAkB9B,EAAKO,aAAc,CAC7CyB,MAAOhC,EAAKS,QAAQJ,kBAEpB4B,KAAM,SAAA3B,KACCC,aAAa2B,oBAAoB,UAAWlC,EAAKS,QAAQC,sBAGhEyB,MAAO,SAAA7B,UAAON,EAAK0B,MAAO,GAE1BU,MAAO,SAAA9B,KACAG,QAAQO,YAAYV,GAErBA,EAAI+B,UAAUC,SAAS,aACpB1B,eAAe2B,yBAKrB7C,KAAKoC,kBAAkBU,OAAQ,CAClCC,OAAQ,SAAAnC,UAAON,EAAK0B,MAAO,yBAIX,SAAApB,OACdH,EAASG,EAAIoC,OAAOzC,QAAQ,KAC3BM,aAAaW,MAAQf,EAAOe,QAC5BT,QAAQO,gBACR2B,KAAK,kBAAmBxC,EAAOyC,kBAC/BlB,MAAO,kBAGE,SAAApB,GACU,SAApBA,EAAIoC,OAAOG,MAAmBvC,EAAIoC,OAAOxB,OAAqC,KAA5BlB,EAAKO,aAAaW,SACjEN,eAAe2B,+QAtHMO,qFA6HrBA,kBAAkBC,qBAAoB,oDAO9C5C,EAAQ6C,QACNpC,eAAeqC,UAAU9C,EAAQ6C,wCAIjCzC,aAAaW,MAAQ,QACrBH,eAAiB,OACjBN,QAAQU,sDAIRZ,aAAayB,uCAGZI,EAAOc,EAAQC,GAEjBC,KAAK3C,QAAQ4C,WAIjBjB,EAAMkB,KAAO,QACblB,EAAMmB,GAAKJ,OAENzD,KAAK8D,eAAe,eAAgB,CACvCC,UAAU,EACVC,QAAStB,SAGNuB,YAAYP,KAAK7C,wDACT2C,yCAhCNE,KAAK7C,aAAaW,kDAoC7B0C,eAAeC,OAAO,kBAAmBpE"}